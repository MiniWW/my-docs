---
cover: /assets/images/cover2.jpg
icon: pen-to-square
date: 2024-05-05
category:
  - 数据库
tag:
  - 红
  - 圆
star: true
sticky: true
---
# mysql索引
## mysql索引的分类
::: tip
分为**聚簇索引和非聚簇索引两大类**
聚簇索引的叶子节点存放的是实际数据，所有完整的用户记录都存放在聚簇索引的叶子节点

二级索引(非聚簇索引）的叶子节点存放的是主键值，而不是实际数据，
如果要查询的列走了二级索引，而叶子节点存放的值没有恰好全部包含自己要查询的数据列，那么就会进行**回表查询**
如果恰好包含，那么就是**覆盖索引**

**聚簇索引必须有且只有一个**，也就是主键索引，二级索引可以有多个
:::
![img_8.png](img_8.png)
**主键索引：**
![img_6.png](img_6.png)
**二级索引：**
![img_7.png](img_7.png)


### 索引的优缺点

> 优点：
>
> 1. 提高数据查询的效率，降低数据库的IO成本。(因为索引是个有序的结构)
> 2. 通过索引列对数据进行排序，降低数据排序的成本，降低CPU消耗。
>
> 缺点：
>
> 1. 索引会占用存储空间。
>
> 2. 索引大大提高了查询效率，同时却也降低了insert、update、delete的效率，
     >
     >    **因为如果更新的某个列创建了索引，那么相应的索引列也得更新。**

> 测试没有使用索引的查询：
>
![img_4.png](img_4.png)
>
> 添加索引后查询：
>
> ```mysql
> -- 添加索引
> 
> create index idx_sku_sn on  (sn);  #在添加索引时，也需要消耗时间
> 
> -- 查询数据（使用了索引）
> select * from tb_sku where sn = '100000003145008';
> ~~~
>
![img_5.png](img_5.png)




